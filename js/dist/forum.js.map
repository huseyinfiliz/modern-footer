{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@huseyinfiliz/modern-footer/webpack/bootstrap","webpack://@huseyinfiliz/modern-footer/webpack/runtime/compat get default export","webpack://@huseyinfiliz/modern-footer/webpack/runtime/define property getters","webpack://@huseyinfiliz/modern-footer/webpack/runtime/hasOwnProperty shorthand","webpack://@huseyinfiliz/modern-footer/external root \"flarum.core.compat['forum/app']\"","webpack://@huseyinfiliz/modern-footer/external root \"flarum.core.compat['common/extend']\"","webpack://@huseyinfiliz/modern-footer/external root \"flarum.core.compat['forum/ForumApplication']\"","webpack://@huseyinfiliz/modern-footer/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@huseyinfiliz/modern-footer/external root \"flarum.core.compat['common/Component']\"","webpack://@huseyinfiliz/modern-footer/./src/forum/components/CustomFooter.js","webpack://@huseyinfiliz/modern-footer/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@huseyinfiliz/modern-footer/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/ForumApplication'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\n\nexport default class CustomFooter extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    const js = app.forum.attribute('modern-footer.js');\n    if (js) {\n      const sanitizedJS = js.trim();\n      const jsWithoutComments = sanitizedJS\n        .replace(/<!--[\\s\\S]*?-->/g, '') \n        .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '') \n        .replace(/\\/\\/[^\\n\\r]*/g, '') \n        .trim();\n\n      if (\n        jsWithoutComments.startsWith('<script') &&\n        jsWithoutComments.endsWith('</script>')\n      ) {\n        $('body').append(sanitizedJS);\n      } else {\n        $('body').append(`<script>${jsWithoutComments}</script>`);\n      }\n    }\n  }\n\n  view() {\n    const isInfoEnabled = app.forum.attribute('modern-footer.info-enabled') === '1';\n    const isLegalEnabled = app.forum.attribute('modern-footer.links-1-enabled') === '1';\n    const isLinksEnabled = app.forum.attribute('modern-footer.links-2-enabled') === '1';\n    const isAboutEnabled = app.forum.attribute('modern-footer.links-3-enabled') === '1';\n    const isOtherEnabled = app.forum.attribute('modern-footer.links-4-enabled') === '1';\n    const isBottomEnabled = app.forum.attribute('modern-footer.bottom-enabled') === '1';\n\n    return (\n      <div>\n        <div class=\"row\">\n          {isInfoEnabled && this.renderInfoBlock()}\n          {isLegalEnabled && this.renderLinksBlock(app.forum.attribute('modern-footer.title-2'), 1, 6, app.forum.attribute('modern-footer.title-fa-2'))}\n          {isLinksEnabled && this.renderLinksBlock(app.forum.attribute('modern-footer.title-3'), 7, 12, app.forum.attribute('modern-footer.title-fa-3'))}\n          {isAboutEnabled && this.renderLinksBlock(app.forum.attribute('modern-footer.title-4'), 13, 18, app.forum.attribute('modern-footer.title-fa-4'))}\n          {isOtherEnabled && this.renderLinksBlock(app.forum.attribute('modern-footer.title-5'), 19, 24, app.forum.attribute('modern-footer.title-fa-5'))}\n        </div>\n\n        {/* Alt Bilgi (foo-bottom) */}\n        {isBottomEnabled && (\n          <div class=\"foo-bottom\">\n            <p>{app.forum.attribute('modern-footer.copyright') || ''}</p>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  renderInfoBlock() {\n    const titleContent = app.forum.attribute('modern-footer.title-1')?.trim();\n    const rightText = app.forum.attribute('modern-footer.right-text') || '';\n\n    return (\n      <div class=\"foo-left\">\n        <div>\n          {titleContent ? (\n            titleContent.startsWith('http') ? (\n              <h3>\n                <img src={titleContent} alt=\"Footer Logo\" />\n              </h3>\n            ) : (\n              <h3>{m.trust(titleContent)}</h3>\n            )\n          ) : null}\n          {rightText && <p>{rightText}</p>}\n          {this.renderSocialButtons()}\n        </div>\n      </div>\n    );\n  }\n\n  renderLinksBlock(title, start, end, iconClass) {\n    return (\n      <div class=\"foo-mid\">\n        <div>\n          <h3>\n            <i class={iconClass}></i> {title}\n          </h3>\n          <ul>\n            {this.renderLinks(start, end)}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  renderSocialButtons() {\n    const fields = [\n      { icon: app.forum.attribute('modern-footer.contact'), link: app.forum.attribute('modern-footer.contact-link') },\n      { icon: app.forum.attribute('modern-footer.contact-2'), link: app.forum.attribute('modern-footer.contact-link-2') },\n      { icon: app.forum.attribute('modern-footer.contact-3'), link: app.forum.attribute('modern-footer.contact-link-3') },\n      { icon: app.forum.attribute('modern-footer.contact-4'), link: app.forum.attribute('modern-footer.contact-link-4') },\n    ];\n\n    return fields.map((field) => {\n      if (!field.icon && !field.link) {\n        return null;\n      }\n\n      if (!field.icon || !field.icon.startsWith('fa')) {\n        field.icon = 'fas fa-link';\n      }\n\n      const link = field.link || '#';\n\n      return (\n        <button class=\"Button Button Social\">\n          <span class=\"Button-label\">\n            <a href={link} target={this.isExternalLink(link) ? '_blank' : undefined}>\n              <i class={field.icon}></i>\n            </a>\n          </span>\n        </button>\n      );\n    });\n  }\n\n  renderLinks(start, end) {\n    const links = [];\n    for (let i = start; i <= end; i++) {\n      const link = app.forum.attribute(`modern-footer.link-${i}`);\n      const text = app.forum.attribute(`modern-footer.text-${i}`);\n      if (link && text) {\n        links.push(\n          <li>\n            <a href={link} target={this.isExternalLink(link) ? '_blank' : undefined}>\n              {text}\n            </a>\n          </li>\n        );\n      }\n    }\n    return links;\n  }\n\n  isExternalLink(link) {\n    try {\n      const url = new URL(link, window.location.origin);\n      const currentHost = this.normalizeHostname(window.location.hostname);\n      const linkHost = this.normalizeHostname(url.hostname);\n\n      return currentHost !== linkHost;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  normalizeHostname(hostname) {\n    return hostname.replace(/^www\\./, '');\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport ForumApplication from 'flarum/forum/ForumApplication';\n\nimport CustomFooter from './components/CustomFooter';\n\napp.initializers.add('huseyinfiliz-modern-footer', () => {\n  extend(ForumApplication.prototype, 'mount', () => {\n    const footer = document.createElement('footer');\n\n    const mobileTabHeight = app.forum.attribute('modern-footer.mobile-tab') || '0px';\n\n    const style = document.createElement('style');\n    style.innerHTML = `\n      @media (max-width: 768px) {\n        footer {\n          padding-bottom: ${mobileTabHeight};\n        }\n      }\n    `;\n    document.head.appendChild(style);\n\n    m.mount(document.body.appendChild(footer), CustomFooter);\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","CustomFooter","_Component","subClass","superClass","apply","arguments","create","constructor","_proto","oninit","vnode","js","app","attribute","sanitizedJS","trim","jsWithoutComments","replace","startsWith","endsWith","$","append","view","isInfoEnabled","isLegalEnabled","isLinksEnabled","isAboutEnabled","isOtherEnabled","isBottomEnabled","m","class","this","renderInfoBlock","renderLinksBlock","_app$forum$attribute","titleContent","rightText","src","alt","trust","renderSocialButtons","title","start","end","iconClass","renderLinks","_this","icon","link","map","field","href","target","isExternalLink","undefined","links","i","text","push","url","URL","window","location","origin","normalizeHostname","hostname","e","Component","add","extend","ForumApplication","footer","document","createElement","mobileTabHeight","style","innerHTML","head","appendChild","mount","body"],"sourceRoot":""}
