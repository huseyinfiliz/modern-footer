{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@huseyinfiliz/modern-footer/webpack/bootstrap","webpack://@huseyinfiliz/modern-footer/webpack/runtime/compat get default export","webpack://@huseyinfiliz/modern-footer/webpack/runtime/define property getters","webpack://@huseyinfiliz/modern-footer/webpack/runtime/hasOwnProperty shorthand","webpack://@huseyinfiliz/modern-footer/external root \"flarum.core.compat['forum/app']\"","webpack://@huseyinfiliz/modern-footer/external root \"flarum.core.compat['common/extend']\"","webpack://@huseyinfiliz/modern-footer/external root \"flarum.core.compat['forum/ForumApplication']\"","webpack://@huseyinfiliz/modern-footer/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@huseyinfiliz/modern-footer/external root \"flarum.core.compat['common/Component']\"","webpack://@huseyinfiliz/modern-footer/./src/forum/components/CustomFooter.js","webpack://@huseyinfiliz/modern-footer/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@huseyinfiliz/modern-footer/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/ForumApplication'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\n\nexport default class CustomFooter extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.open = false;\n\n    const js = app.forum.attribute('modern-footer.js');\n    if (js) {\n      const sanitizedJS = js.trim();\n\n      const jsWithoutComments = sanitizedJS\n        .replace(/<!--[\\s\\S]*?-->/g, '') \n        .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '') \n        .replace(/\\/\\/[^\\n\\r]*/g, '') \n        .trim();\n\n      if (\n        jsWithoutComments.startsWith('<script') &&\n        jsWithoutComments.endsWith('</script>')\n      ) {\n        $('body').append(sanitizedJS);\n      } else {\n        $('body').append(`<script>${jsWithoutComments}</script>`);\n      }\n    }\n  }\n\n  view() {\n    const currentYear = new Date().getFullYear();\n    const currentDomain = window.location.hostname;\n\n    return (\n      <footer>\n        <div class=\"row\">\n          <div class=\"foo-left\">\n            <h3>\n              {m.trust(\n                app.forum.attribute('modern-footer.title-1') ||\n                  window.location.hostname \n              )}\n            </h3>\n            <p>\n              {app.forum.attribute('modern-footer.copyright') ||\n                ``}\n            </p>\n            <button class=\"Button Button--primary\">\n              <span class=\"Button-label\">\n                <a\n                  href={app.forum.attribute('modern-footer.contact-link') || '#contact'}\n                >\n                  {m.trust(app.forum.attribute('modern-footer.contact') || '<i class=\"fas fa-envelope\"></i>')}\n                </a>\n              </span>\n            </button>\n          </div>\n\n          <div class=\"foo-mid\">\n            <h3>{app.forum.attribute('modern-footer.title-2') || ''}</h3>\n            <ul>\n              {[1, 2, 3, 4].map((i) => {\n                const link = app.forum.attribute(`modern-footer.link-${i}`);\n                const text = app.forum.attribute(`modern-footer.text-${i}`);\n                const isExternalLink = link && this.isExternalLink(link);\n                return link && text ? (\n                  <li>\n                    <a\n                      href={link || '#'}\n                      target={isExternalLink ? '_blank' : undefined}\n                    >\n                      {text}\n                    </a>\n                  </li>\n                ) : null;\n              })}\n            </ul>\n          </div>\n\n          <div class=\"foo-mid\">\n            <h3>{app.forum.attribute('modern-footer.title-3') || ''}</h3>\n            <ul>\n              {[5, 6, 7, 8].map((i) => {\n                const link = app.forum.attribute(`modern-footer.link-${i}`);\n                const text = app.forum.attribute(`modern-footer.text-${i}`);\n                const isExternalLink = link && this.isExternalLink(link);\n                return link && text ? (\n                  <li>\n                    <a\n                      href={link || '#'}\n                      target={isExternalLink ? '_blank' : undefined}\n                    >\n                      {text}\n                    </a>\n                  </li>\n                ) : null;\n              })}\n            </ul>\n          </div>\n\n          <div class=\"foo-right\">\n            <h3>\n              {app.forum.attribute('modern-footer.title-4') || ''}\n            </h3>\n            <p>\n              {m.trust(\n                app.forum.attribute('modern-footer.right-text') || ''\n              )}\n            </p>\n          </div>\n        </div>\n      </footer>\n    );\n  }\n\n  isExternalLink(link) {\n    try {\n      const url = new URL(link, window.location.origin);\n      const currentHost = this.normalizeHostname(window.location.hostname);\n      const linkHost = this.normalizeHostname(url.hostname);\n\n      return currentHost !== linkHost;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  normalizeHostname(hostname) {\n    return hostname.replace(/^www\\./, '');\n  }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport ForumApplication from 'flarum/forum/ForumApplication';\n\nimport CustomFooter from './components/CustomFooter';\n\napp.initializers.add('huseyinfiliz-modern-footer', () => {\n  extend(ForumApplication.prototype, 'mount', () => {\n    const footer = document.createElement('footer');\n\n    m.mount(document.body.appendChild(footer), CustomFooter);\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","CustomFooter","_Component","subClass","superClass","apply","arguments","create","constructor","_proto","oninit","vnode","this","open","js","app","attribute","sanitizedJS","trim","jsWithoutComments","replace","startsWith","endsWith","$","append","view","_this","Date","getFullYear","window","location","hostname","m","class","trust","href","map","i","link","text","isExternalLink","target","undefined","url","URL","origin","normalizeHostname","e","Component","add","extend","ForumApplication","footer","document","createElement","mount","body","appendChild"],"sourceRoot":""}